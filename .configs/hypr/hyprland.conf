########################################
#       https://wiki.hypr.land/        #
########################################

########################################
#              My Programs             #
########################################
$mainMod = SUPER
$terminal = ghostty
$file = thunar
$browser = librewolf
$bar = waybar
$polkit = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
$wallpaper = swaybg -i /home/dash-/.config/hypr/thinkpad.jpg -m fill
$menu = rofi -show run -theme /home/dash-/.config/rofi/theme.rasi
$display = nwg-displays

########################################
#           Environment Vars           #
########################################
env = WLR_NO_HARDWARE_CURSORS,1          # Disable hardware cursors
env = XDG_SESSION_TYPE,wayland           # Set session type to Wayland
env = XDG_CURRENT_DESKTOP,Hyprland       # Current desktop
env = XDG_SESSION_DESKTOP,Hyprland       # Session desktop
env = GDK_BACKEND,wayland,x11            # GTK backend
env = ELECTRON_OZONE_PLATFORM_HINT,wayland # Electron apps on Wayland
env = OZONE_PLATFORM,wayland             # Ozone platform
env = MOZ_ENABLE_WAYLAND,1               # Firefox Wayland
env = GTK_THEME,adwaita-dark-amoled-master # GTK theme
env = GTK_ICON_THEME,BeautyLine          # Icon theme
env = QT_QPA_PLATFORMTHEME,qt5ct         # Qt platform theme
env = QT_STYLE_OVERRIDE,adwaita-dark     # Qt style override
env = XCURSOR_THEME,Bibata-Modern-Classic # Cursor theme
env = XCURSOR_SIZE,24                    # Cursor size
env = MOZ_ENABLE_WAYLAND=1               # Firefox theme
env = SWAYSOCK=$XDG_RUNTIME_DIR/hypr/$HYPRLAND_INSTANCE_SIGNATURE/.socket2.sock,swaykbdd

########################################
#           Autostart apps             #
########################################
exec-once = dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP HYPRLAND_INSTANCE_SIGNATURE
exec-once = $bar & $wallpaper & hypridle & mako & $polkit
exec-once = xhost +local:
exec-once = mpd & bash -c 'sleep 20; mpd-mpris'
#exec-once = easyeffects --gapplication-service
exec-once = $terminal

########################################
#            Monitor setup             #
########################################
#monitor = eDP-1,1366x768@60.06000,0x0,1

########################################
#            Input settings            #
########################################
input {
    kb_layout = us,ir
    # kb_options = grp:rwin_toggle
    # kb_options = grp:alt_shift_toggle
    # kb_options = grp:caps_toggle
    numlock_by_default = true
    follow_mouse = 1
    sensitivity = 0
    touchpad {
        natural_scroll = true
        disable_while_typing = true
        tap-to-click = true
        drag_lock = false
        middle_button_emulation = true
        tap-and-drag = true
        scroll_factor = 0.3
    }
}

########################################
#           General settings           #
########################################
general {
    gaps_in = 0
    gaps_out = 0
    border_size = 1
    resize_on_border = true
    col.active_border = rgba(00ffffff) rgba(0000ffff) -360deg
    col.inactive_border = false
    layout = dwindle
    gesture = 3, horizontal, workspace
    gesture = 3, down, mod: ALT, close
}
########################################
#           Cursor settings            #
########################################
cursor {
	min_refresh_rate = 75
}

########################################
#           Window decoration          #
########################################
decoration {
    rounding = 0
    inactive_opacity = 1.0
    active_opacity = 1.0
    blur {
        enabled = false
        size = 0
        passes = 3
        noise = 0.0
        brightness = 1.0
        new_optimizations = true
        ignore_opacity = true     
    }
    shadow {
        enabled = false
        range = 0
        render_power = 1
        color = rgba(000000ff)
    }
}

########################################
#            Animations                #
########################################
animations {
    enabled = yes
    bezier = myBezier     , 0.05   , 0.9,   0.1,   1.05
    bezier = punchy       , 0.2    , 1.3,   0.3,   1.0
    bezier = punchyWindow , 0.2    , 1.2,   0.4,   1.05

    animation = global,        1,     10,    default
    animation = border,        1,      1,    default
    animation = borderangle,   1,     10,    default
    animation = fade,          1,      7,    default
    animation = workspaces,    1,      6,    punchy
    animation = windows,       1,      5,    punchyWindow
    animation = windowsOut,    1,      6,    punchyWindow, popin 50%
    animation = zoomFactor,    1,      7,    default
}

########################################
#            Dwindle layout            #
########################################
dwindle {
    pseudotile = yes
    preserve_split = yes
}

########################################
#            Misc settings             #
########################################
misc {
	mouse_move_enables_dpms = true
	key_press_enables_dpms = true
	always_follow_on_dnd = true
	animate_manual_resizes = false
	animate_mouse_windowdragging = false
	allow_session_lock_restore = true
	anr_missed_pings = 10
}

########################################
#            Keybindings               #
########################################
# System
bind = $mainMod, M, exec, systemctl suspend
#bind = $mainMod, N, exec, hyprlock
bind = , INSERT, exec, hyprctl switchxkblayout at-translated-set-2-keyboard next

# Window control
bind = $mainMod, Q, killactive
bind = $mainMod, C, killactive
bind = $mainMod, Z, pseudo
bind = $mainMod, X, togglesplit
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d
bind = $mainMod, V, togglefloating
bind = $mainMod, F, fullscreen, 1
bind = , F11, fullscreen
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Apps
bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, KP_ENTER, exec, $terminal
bind = , XF86LaunchA, exec, $terminal
bind = $mainMod, E, exec, $file
bind = , XF86Explorer, exec, $file
bind = $mainMod, G, exec, $browser
bind = $mainMod, D, exec, $menu
bind = , XF86Search, exec, $menu
bind = $mainMod, W, exec, killall $bar || $bar
bind = , XF86Display, exec,killall $display || $display
bind = , XF86Tools, exec, ghostty -e btop

# Screenshot & Screenrecord
bind = , Print, exec, bash -c '~/.config/hypr/screenshot.sh'
bind = , F9, exec, bash -c '~/.config/hypr/wf-recorder-script.sh'
bind = , F10, exec, bash -c '~/.config/hypr/wf-recorder-kill.sh'

# Workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Special workspace
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# Workspace switching with mouse
bind = $mainMod, mouse:276, workspace, e+1
bind = $mainMod, mouse:275, workspace, e-1
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Audio controls
bind = $mainMod, equal, exec, pactl set-sink-volume @DEFAULT_SINK@ +5%
bind = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5%
bind = $mainMod, minus, exec, pactl set-sink-volume @DEFAULT_SINK@ -5%
bind = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5%
bind = , XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bind = , XF86AudioMicMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Media controls
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = $mainMod, P, exec, playerctl play-pause
bind = $mainMod, XF86AudioMute, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = $mainMod SHIFT, P, exec, playerctl next
bind = $mainMod, XF86AudioRaiseVolume, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous
bind = $mainMod CTRL, P, exec, playerctl previous
bind = $mainMod, XF86AudioLowerVolume, exec, playerctl previous
bind = , XF86AudioStop, exec, playerctl stop
bind = $mainMod, XF86AudioMicMute, exec, playerctl stop

# Brightness controls
bind = , XF86MonBrightnessUp, exec, brightnessctl --device=intel_backlight set +10%
bind = , XF86MonBrightnessDown, exec, brightnessctl --device=intel_backlight set 10%-

# Window resize
bind = $mainMod CTRL, right, resizeactive, 10 0
bind = $mainMod CTRL, left, resizeactive, -10 0
bind = $mainMod CTRL, up, resizeactive, 0 -10
bind = $mainMod CTRL, down, resizeactive, 0 10
bind = $mainMod CTRL, L, resizeactive, 10 0
bind = $mainMod CTRL, H, resizeactive, -10 0
bind = $mainMod CTRL, K, resizeactive, 0 -10
bind = $mainMod CTRL, J, resizeactive, 0 10

# Window move
bind = $mainMod SHIFT, right, moveactive, 30 0
bind = $mainMod SHIFT, left, moveactive, -30 0
bind = $mainMod SHIFT, up, moveactive, 0 -30
bind = $mainMod SHIFT, down, moveactive, 0 30
bind = $mainMod SHIFT, L, moveactive, 30 0
bind = $mainMod SHIFT, H, moveactive, -30 0
bind = $mainMod SHIFT, K, moveactive, 0 -30
bind = $mainMod SHIFT, J, moveactive, 0 30

